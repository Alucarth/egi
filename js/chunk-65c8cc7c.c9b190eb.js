(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65c8cc7c"],{"2b9f":function(t,e,a){"use strict";a.r(e);var s=a("8336"),i=a("b0af"),o=a("99d9"),n=a("cc20"),r=a("62ad"),l=a("a523"),c=a("8fea"),u=a("169a"),d=a("ce7e"),p=a("132d"),h=a("891e"),g=a("490a"),m=a("67b6"),v=a("43a6"),_=a("0fd9"),f=a("1f4f"),b=a("2db4"),C=a("2fa4"),k=a("8654"),y=function(){var t=this,e=t._self._c;return e("div",[e(l["a"],{attrs:{"grid-list-xl":"",fluid:""}},[e("header-title",{attrs:{title:"Evaluación"}}),e(_["a"],{staticClass:"mb-6"},[e(r["a"],{attrs:{cols:"12",sm:"12"}},[e(i["a"],[e(o["c"],[t._v(" DATOS PERSONALES "),e(_["a"],{staticClass:"mt-1"},[e(r["a"],{attrs:{cols:"12",sm:"6",md:"4"}},[e(k["a"],{attrs:{label:"Nombres",filled:"",disabled:"","hide-details":""},model:{value:t.postulante.nombres,callback:function(e){t.$set(t.postulante,"nombres",e)},expression:"postulante.nombres"}})],1),e(r["a"],{attrs:{cols:"12",sm:"4"}},[e(k["a"],{attrs:{label:"Apellido paterno",filled:"",disabled:"","hide-details":""},model:{value:t.postulante.paterno,callback:function(e){t.$set(t.postulante,"paterno",e)},expression:"postulante.paterno"}})],1),e(r["a"],{attrs:{cols:"12",sm:"4"}},[e(k["a"],{attrs:{label:"Apellido materno",filled:"",disabled:"","hide-details":""},model:{value:t.postulante.materno,callback:function(e){t.$set(t.postulante,"materno",e)},expression:"postulante.materno"}})],1)],1),e("p",{staticClass:"mt-8"},[t._v("CARGOS AL QUE SE REGISTRO")]),t.postulante_inscripcions.length>0?e(_["a"],{staticClass:"mb-4"},t._l(t.postulante_inscripcions,(function(a,n){return e(r["a"],{key:n,attrs:{cols:"12",sm:"3"}},[e(i["a"],{attrs:{elevation:"3"}},[e(o["c"],[e("span",{staticClass:"text-h6 font-weight-medium"},[t._v(" "+t._s(a.institucion)+" "),e("p",{staticClass:"body-2"},[t._v(t._s(a.institucion_descripcion))])]),e("p",[e("b",[t._v("CARGO")]),e("br"),t._v(t._s(a.cargo))]),[39,40,41,42,43,44,45,46,47,48,49].includes(a.cargo_id)?e("span",{staticClass:"red--text"},[t._v(" En caso de estar inscrito a más de un cargo administrativo, solo tendrá validez la primera. ")]):t._e()]),e(d["a"]),e(o["a"],[e(C["a"]),e(s["a"],{attrs:{color:"primary",loading:t.data_loading,disabled:t.init_test},on:{click:function(e){return t.showConfirmStart(a.convocatoria_id,a.cargo_id,a.codigo_institucion,a.institucion,a.cargo)}}},[t._v(" "+t._s(t.text_button)+" ")]),e(C["a"])],1)],1)],1)})),1):e(_["a"],{staticClass:"my-4"},[e(r["a"],{staticClass:"red--text",attrs:{cols:"12"}},[t._v(" No hay cargos habilitados para la fecha actual. ")])],1),"preguntas"==t.estado?e("div",[e("h3",{staticClass:"teal--text my-4"},[t._v("100 Preguntas (120 minutos)")]),e(_["a"],[e(r["a"],{attrs:{cols:"12",md:"12"}},[e(c["a"],{staticClass:"elevation-1",attrs:{headers:t.headers,mobile:!0,items:t.postulante.preguntas,page:t.page,"items-per-page":t.itemsPerPage,"hide-default-footer":""},on:{"update:page":function(e){t.page=e},"page-count":function(e){t.pageCount=e}},scopedSlots:t._u([{key:"item.pregunta",fn:function({item:a}){return[e("p",{staticClass:"text-left subtitle-2 py-2"},[t._v(" "+t._s(a.descripcion)+" ")]),e(v["a"],{attrs:{rows:""},model:{value:a.respuesta,callback:function(e){t.$set(a,"respuesta",e)},expression:"item.respuesta"}},t._l(a.evaluacion_opcions,(function(a,s){return e(m["a"],{key:s,attrs:{label:a.opcion,value:s},on:{change:t.saveLocalQuestion}})})),1)]}}],null,!1,2392093511)}),e("div",{staticClass:"text-center pt-2"},[e(h["a"],{attrs:{length:t.pageCount},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1),e(r["a"],{staticClass:"text-center",attrs:{cols:"12"}},[e(s["a"],{staticClass:"mt-5",attrs:{large:"",color:"primary"},on:{click:t.showConfirm}},[e(p["a"],{attrs:{small:""}},[t._v("mdi-send")]),t._v(" Finalizar Prueba ")],1)],1)],1)],1):"tabla"==t.estado?e("div",[e("h3",{staticClass:"teal--text mt-4"},[t._v("Resultado de la Prueba")]),e("p",{staticClass:"my-2"},[e("b",[t._v(t._s(t.ver_institucion))]),e("br"),t._v(" "+t._s(t.ver_cargo)+" ")]),e(f["a"],{scopedSlots:t._u([{key:"default",fn:function(){return[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[t._v("Nombre completo")]),e("th",{staticClass:"text-center"},[t._v("Aciertos (#)")]),e("th",{staticClass:"text-left"},[t._v("Estado")])])]),e("tbody",t._l(t.respuestas,(function(a,s){return e("tr",{key:s},[e("td",[t._v(t._s(a.nombre))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.acierto))]),e("td",[1==a.estado||1==a.estado||"true"==a.estado?e("span",[e(n["a"],{attrs:{small:"",color:"green lighten-4"}},[t._v("activo")])],1):e("span",[e(n["a"],{attrs:{small:"",color:"red lighten-4"}},[t._v("inactivo")])],1)])])})),0)]},proxy:!0}])})],1):t.data_loading?e("div",{staticClass:"text-center"},[e(g["a"],{attrs:{color:"blue",indeterminate:""}})],1):t._e(),"mensaje"==t.estado?e("div",{staticClass:"text-center"},[e("p",{staticClass:"red--text"},[t._v(t._s(t.message))])]):t._e()],1)],1)],1)],1)],1),e(u["a"],{attrs:{persistent:"",width:"300"},model:{value:t.initDialog,callback:function(e){t.initDialog=e},expression:"initDialog"}},[e(i["a"],[e(o["d"],{staticClass:"headline grey lighten-3",attrs:{"primary-title":""}},[e("span",{staticClass:"headline"},[t._v("Alerta")])]),e(o["c"],[e("p",[t._v("¿Esta seguro(a) de comenzar con la prueba?")]),e("p",[t._v("O en caso de haber realizado la prueba podrá ver el resultado.")])]),e(d["a"]),e(o["a"],[e(C["a"]),e(s["a"],{attrs:{color:"success",loading:t.send_loading},on:{click:t.checkResponse}},[t._v(" Aceptar ")]),e(s["a"],{attrs:{color:"error"},on:{click:function(e){t.initDialog=!1}}},[t._v("Cancelar")])],1)],1)],1),e(u["a"],{attrs:{persistent:"",width:"300"},model:{value:t.sendDialog,callback:function(e){t.sendDialog=e},expression:"sendDialog"}},[e(i["a"],[e(o["d"],{staticClass:"headline grey lighten-3",attrs:{"primary-title":""}},[e("span",{staticClass:"headline"},[t._v("Alerta")])]),e(o["c"],[e("p",[t._v("¿Esta seguro(a) de enviar y finalizar la prueba?")]),e("p",{staticClass:"red--text"},[t._v("Una vez enviada no podrá modificar la prueba.")])]),e(d["a"]),e(o["a"],[e(C["a"]),e(s["a"],{attrs:{color:"success",loading:t.send_loading},on:{click:t.sendResult}},[t._v(" Aceptar ")]),e(s["a"],{attrs:{color:"error"},on:{click:function(e){t.sendDialog=!1}}},[t._v("Cancelar")])],1)],1)],1),e(b["a"],{attrs:{top:"top",right:"right",rounded:"pill",color:t.snack.color,timeout:t.snack.time,tile:t.snack.tile,"content-class":"text-h6s font-weight-mediums",centered:!0},model:{value:t.snack.state,callback:function(e){t.$set(t.snack,"state",e)},expression:"snack.state"}},[t._v(t._s(t.snack.text))])],1)},x=[],S=(a("14d9"),a("13d5"),a("78d5")),A=a("154f"),D=a("bc3a"),w=a.n(D);const I=7200;var R={name:"institucionalizacion-evaluacion",components:{HeaderTitle:S["a"]},data:()=>({page:1,pageCount:0,itemsPerPage:1,headers:[{text:"",sortable:!1,value:"pregunta"}],initDialog:!1,sendDialog:!1,loading:!1,question_loading:!1,data_loading:!1,send_loading:!1,btn_loading:!1,server:"",estado:"",init_test:!1,text_button:"COMENZAR",message:"",respuestas:[],postulante:{id:"",nombres:"",paterno:"",materno:"",preguntas:[],acierto:0,porcentaje:0,convocatoria_id:"",cargo_id:"",codigo_institucion:"",tiempo:""},postulante_inscripcions:[],ver_institucion:"",ver_cargo:"",snack:{state:!1,color:"success",text:"",time:"2500",tile:!1},timePassed:0,timerInterval:null}),mounted(){this.server=A["a"].getServe();let t=A["a"].getUser();t?(this.postulante.id=t.uid,this.searchPostulante(this.postulante.id)):"root"!=this.$router.currentRoute.name&&this.$router.push({name:"root"});let e=A["a"].getQuestion();if(e){this.estado="preguntas",this.init_test=!0,this.text_button="EN PROCESO",this.postulante.preguntas=e;let t=A["a"].getParams();this.postulante.convocatoria_id=t.convocatoria_id,this.postulante.codigo_institucion=t.codigo_institucion,this.postulante.cargo_id=t.cargo_id}},computed:{acierto(){return this.postulante.preguntas.reduce((t,e)=>t+(null!=e.respuesta&&!0===e.evaluacion_opcions[e.respuesta].respuesta_correcta?1:0),0)},formattedTimeLeft(){const t=this.timeLeft,e=Math.floor(t/60);let a=t%60;return a<10&&(a="0"+a),`${e}:${a}`},timeLeft(){return I-this.timePassed}},methods:{onChangePage(t){this.pageOfItems=t},searchPostulante(){this.postulante.nombres="",this.postulante.paterno="",this.postulante.materno="",this.postulante.preguntas=[],w.a.post(A["a"].getUrlAPI()+"busca/postulante",{id:this.postulante.id},A["a"].getHeader()).then(t=>{t.data.id>0?(this.postulante.id=t.data.id,this.postulante.nombres=t.data.nombres,this.postulante.paterno=t.data.paterno,this.postulante.materno=t.data.materno,this.postulante_inscripcions=t.data.postulante_inscripcions):this.toast("info","Registro no encontrado")}).catch(()=>{console.error("Postulante no encontrado")})},showConfirmStart(t,e,a,s,i){this.postulante.convocatoria_id=t,this.postulante.cargo_id=e,this.postulante.codigo_institucion=a,this.ver_institucion=s,this.ver_cargo=i,this.estado="",this.initDialog=!0,A["a"].setParams(t,e,a)},checkResponse(){this.estado="",this.postulante.preguntas=[],this.data_loading=!0,w.a.post(A["a"].getUrlAPI()+"check/respuesta",{postulante_id:this.postulante.id,codigo_institucion:this.postulante.codigo_institucion,cargo_id:this.postulante.cargo_id},A["a"].getHeader()).then(t=>{this.initDialog=!1,this.data_loading=!1,"not"==t.data.message?t.data.result.length>0?(this.estado="preguntas",this.postulante.preguntas=t.data.result,this.init_test=!0,this.text_button="EN PROCESO"):(this.estado="mensaje",this.message="El cargo no tiene preguntas"):(this.estado="tabla",this.init_test=!1,this.text_button="COMENZAR",this.respuestas=t.data.result)}).catch(t=>{this.data_loading=!1,console.error("Error al cargar registros",t)})},async showConfirm(){this.send_loading=!1;let t=await this.postulante.preguntas.find(t=>null!=t.respuesta);if(t){if(this.postulante.acierto=this.acierto,this.acierto>0){let t=this.postulante.preguntas.length;this.postulante.porcentaje=Math.round(this.acierto/t*100)}this.sendDialog=!0}else this.toast("warning","Debe marcar las respuestas.");console.log(this.postulante)},prepareSendResult(){if(this.postulante.acierto=this.acierto,this.acierto>0){let t=this.postulante.preguntas.length;this.postulante.porcentaje=Math.round(this.acierto/t*100)}console.log(this.postulante),this.sendResult()},sendResult(){this.send_loading=!0,w.a.post(A["a"].getUrlAPI()+"respuesta",this.postulante,A["a"].getHeader()).then(async t=>{this.send_loading=!1,201===t.status?(this.sendDialog=!1,this.toast("success",t.data.message),this.estado="",this.postulante.preguntas=[],A["a"].removeAll(),await this.checkResponse()):200===t.status&&this.toast("info",t.data.message)}).catch(t=>{this.send_loading=!1,console.error("Error, no se pudo guardar",t)})},saveLocalQuestion(){localStorage.setItem("question",JSON.stringify(this.postulante.preguntas))},toast(t,e){this.snack.color=t,this.snack.text=e,this.snack.state=!0}}},$=R,E=(a("c7e8"),a("2877")),O=Object(E["a"])($,y,x,!1,null,null,null);e["default"]=O.exports},"2c64":function(t,e,a){},"3d86":function(t,e,a){},"43a6":function(t,e,a){"use strict";a("ec29"),a("3d86");var s=a("c37a"),i=a("604c"),o=a("58df");const n=Object(o["a"])(i["a"],s["a"]);e["a"]=n.extend({name:"v-radio-group",provide(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes(){return{...s["a"].options.computed.classes.call(this),"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row}}},methods:{genDefaultSlot(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},s["a"].options.methods.genDefaultSlot.call(this))},genInputSlot(){const t=s["a"].options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel(){const t=s["a"].options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs.for,t.tag="legend",t):null},onClick:i["a"].options.methods.onClick},render(t){const e=s["a"].options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}})},5311:function(t,e,a){"use strict";a("14d9");var s=a("5607"),i=a("2b0e");e["a"]=i["default"].extend({name:"rippleable",directives:{ripple:s["a"]},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}})},"67b6":function(t,e,a){"use strict";a("2c64");var s=a("ba87"),i=a("9d26"),o=a("c37a"),n=a("7e2b"),r=a("a9ad"),l=a("4e82"),c=a("5311"),u=a("7560"),d=a("fe09"),p=a("80d2"),h=a("58df"),g=a("d9f7");const m=Object(h["a"])(n["a"],r["a"],c["a"],Object(l["a"])("radioGroup"),u["a"]);e["a"]=m.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:Boolean,id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:Boolean,value:{default:null}},data:()=>({isFocused:!1}),computed:{classes(){return{"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused,...this.themeClasses,...this.groupClasses}},computedColor(){if(!this.isDisabled)return d["a"].options.computed.computedColor.call(this)},computedIcon(){return this.isActive?this.onIcon:this.offIcon},computedId(){return o["a"].options.computed.computedId.call(this)},hasLabel:o["a"].options.computed.hasLabel,hasState(){return(this.radioGroup||{}).hasState},isDisabled(){return this.disabled||!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly(){return this.readonly||!!this.radioGroup&&this.radioGroup.isReadonly},computedName(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-"+this.radioGroup._uid},rippleState(){return d["a"].options.computed.rippleState.call(this)},validationState(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput(t){return d["a"].options.methods.genInput.call(this,"radio",t)},genLabel(){return this.hasLabel?this.$createElement(s["a"],{on:{click:d["b"]},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},Object(p["s"])(this,"label")||this.label):null},genRadio(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i["a"],this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput({name:this.computedName,value:this.value,...e}),this.genRipple(this.setTextColor(this.rippleState))])},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onChange(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:()=>{}},render(t){const e={staticClass:"v-radio",class:this.classes,on:Object(g["c"])({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return t("div",e,[this.genRadio(),this.genLabel()])}})},c7e8:function(t,e,a){"use strict";a("cbc1")},cbc1:function(t,e,a){},ec29:function(t,e,a){},fe09:function(t,e,a){"use strict";a.d(e,"b",(function(){return r}));a("14d9");var s=a("c37a"),i=a("5311"),o=a("8547"),n=a("58df");function r(t){t.preventDefault()}e["a"]=Object(n["a"])(s["a"],i["a"],o["a"]).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some(e=>this.valueComparator(e,t)):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=s["a"].options.methods.genLabel.call(this);return t?(t.data.on={click:r},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:r},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const a=e.length;e=e.filter(e=>!this.valueComparator(e,t)),e.length===a&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}})}}]);
//# sourceMappingURL=chunk-65c8cc7c.c9b190eb.js.map