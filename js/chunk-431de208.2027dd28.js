(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-431de208"],{7036:function(t,a,e){"use strict";var o=e("b0af"),i=e("99d9"),s=e("490a"),n=function(){var t=this,a=t._self._c;return a(o["a"],{staticClass:"text-center"},[a(i["d"],[t._v(t._s(t.title))]),t.load?a(i["c"],[a(s["a"],{attrs:{size:70,width:7,color:"blue",indeterminate:""}})],1):a(i["c"],[a("h3",{staticClass:"mt-2"},[t._v("No hay convocatoria habilitada para "+t._s(t.process)+".")])])],1)},r=[],l={props:["title","process","load"]},d=l,c=e("2877"),p=Object(c["a"])(d,n,r,!1,null,null,null);a["a"]=p.exports},bd7d:function(t,a,e){"use strict";e.r(a);var o=e("8336"),i=e("b0af"),s=e("99d9"),n=e("62ad"),r=e("a523"),l=e("8fea"),d=e("169a"),c=e("ce7e"),p=e("4bd4"),u=e("132d"),h=e("891e"),f=e("0fd9"),g=e("b974"),m=e("2fa4"),_=e("8654"),v=function(){var t=this,a=t._self._c;return a("div",[a(r["a"],{attrs:{"grid-list-xl":"",fluid:""}},[a("header-title",{attrs:{title:"Lista verificados"}}),t.convocatoria.id>0?a("div",[a(f["a"],[a(n["a"],{attrs:{cols:"12"}},[a(i["a"],[a(s["c"],[a("p",{staticClass:"subtitle-1 font-weight-bold"},[t._v(" "+t._s(t.convocatoria.cite)+" ")]),a("p",[t._v(" Lista de postulantes verificados por la/el responsable de caja de la modalidad "),a("b",[t._v("A")]),t._v(". ")])])],1)],1)],1),a(f["a"],{staticClass:"mb-1"},[a(n["a"],{attrs:{cols:"12"}},[a(i["a"],[a(s["c"],[a(p["a"],{ref:"formp",on:{submit:function(a){return a.preventDefault(),t.getPostulantes()}}},[a(f["a"],{staticClass:"mt-1"},[a(n["a"],{attrs:{cols:"12",sm:"4"}},[a(_["a"],{attrs:{label:"CI o DNI, nombre, apellidos",rules:[t=>!!t||""],hint:"1234567 o 1234567-1G","hide-details":"",clearable:"",filled:""},on:{input:t.changeSearch},model:{value:t.options.search,callback:function(a){t.$set(t.options,"search",a)},expression:"options.search"}})],1),a(n["a"],{attrs:{cols:"12",sm:"8"}},[a(o["a"],{staticClass:"mr-1",attrs:{type:"submit",large:"",color:"primary",loading:t.load_search}},[a(u["a"],[t._v("mdi-magnify")]),t._v(" Buscar ")],1),a(o["a"],{attrs:{type:"button",large:"",color:"error",loading:t.load_report,disabled:0==t.postulantes.length},on:{click:t.reportVerificado}},[a(u["a"],[t._v("mdi-file-download")]),t._v(" PDF ")],1)],1)],1)],1),a(l["a"],{staticClass:"elevation-1",attrs:{loading:t.loading,headers:t.headers,items:t.postulantes,page:t.options.page,"items-per-page":t.options.itemsPerPage,"hide-default-footer":""},on:{"update:page":function(a){return t.$set(t.options,"page",a)}},scopedSlots:t._u([{key:"item.num",fn:function({item:e}){return[a("td",[t._v(" "+t._s((t.options.page-1)*t.options.itemsPerPage+(t.postulantes.indexOf(e)+1))+" ")])]}},{key:"item.nombre",fn:function({item:e}){return[a("td",[t._v(" "+t._s(e.a_persona.paterno)+" "+t._s(e.a_persona.materno)+" "+t._s(e.a_persona.nombres)+" ")])]}},{key:"item.fecha_nacimiento",fn:function({item:e}){return[a("td",[t._v(" "+t._s(t._f("formatdate")(e.a_persona.fecha_nacimiento))+" ")])]}},{key:"item.fecha_deposito",fn:function({item:e}){return[a("td",[t._v(" "+t._s(t._f("formatdate")(e.deposito.fecha))+" ")])]}}],null,!0)}),a("div",{staticClass:"v-data-footer"},[a(f["a"],[a(n["a"],{attrs:{cols:"12",sm:"4"}},[a("div",{staticClass:"v-data-footer__select"},[t._v(" Filas por página: "),a(g["a"],{staticClass:"my-0",attrs:{items:[10,20,30,50,100],"hide-details":""},on:{change:function(a){return t.changePerPage()}},model:{value:t.options.itemsPerPage,callback:function(a){t.$set(t.options,"itemsPerPage",a)},expression:"options.itemsPerPage"}})],1)]),a(n["a"],{staticClass:"text-center",attrs:{cols:"12",sm:"8"}},[a(h["a"],{attrs:{length:t.options.pageCount,"total-visible":5},on:{input:t.changePage},model:{value:t.options.page,callback:function(a){t.$set(t.options,"page",a)},expression:"options.page"}})],1)],1)],1),2===t.type_state?a("div",[a("span",{staticClass:"red--text"},[t._v(" No hay registro con la "),a("b",[t._v("Cédula Identidad o DNA")]),t._v(" ingresada. ")])]):t._e()],1)],1)],1)],1)],1):a("div",[a("notify-card",{attrs:{title:t.notify_title,load:t.notify_load,process:"el proceso de admisión"}})],1)],1),a(d["a"],{attrs:{width:"300"},model:{value:t.confirmDialog,callback:function(a){t.confirmDialog=a},expression:"confirmDialog"}},[a(i["a"],[a(s["d"],{staticClass:"headline grey lighten-3",attrs:{"primary-title":""}},[a("span",{staticClass:"headline"},[t._v("Alerta")])]),a(s["c"],{staticClass:"text-center"},[a("p",[t._v(" ¿Está seguro(a) de habilitar al postulante "),a("b",{staticClass:"blue--text"},[t._v(t._s(t.postulante))]),t._v(" para la "),a("b",[t._v("Prueba de Aptitud o Escrita")]),t._v("? ")]),a("p",[t._v("Dando su VoBo de que el "),a("b",[t._v("depósito bancario")]),t._v(" es correcto.")])]),a(c["a"]),a(s["a"],[a(m["a"]),a(o["a"],{attrs:{color:"success",loading:t.load_send,text:""},on:{click:function(a){return t.checkPostulante()}}},[t._v("Aceptar")]),a(o["a"],{attrs:{color:"red",text:""},on:{click:function(a){t.confirmDialog=!1}}},[t._v("Cancelar")])],1)],1)],1)],1)},b=[],x=(e("14d9"),e("78d5")),C=e("7036"),P=e("154f"),y=e("9380"),w=e("e499"),A=e.n(w),D=e("4ebb"),k=e.n(D),S=e("2f62"),E=e("bc3a"),$=e.n(E);A.a.vfs=k.a.pdfMake.vfs;var I={name:"admision-verificado-caja",components:{HeaderTitle:x["a"],NotifyCard:C["a"]},data:()=>({notify_title:"Cargando",notify_load:!0,loading:!1,load_search:!1,load_send:!1,load_report:!1,type_state:1,cedula_dni:"",convocatoria:{id:null,cite:""},headers:[{text:"#",align:"start",sortable:!1,value:"num"},{text:"Apellidos y nombres",value:"nombre"},{text:"Cédula identidad",value:"a_persona.cedula_dni"},{text:"Complemento",value:"a_persona.complemento"},{text:"Fecha nacimiento",value:"fecha_nacimiento"},{text:"Celular",value:"a_persona.celular"},{text:"Especialidad",value:"especialidad.descripcion"},{text:"Nro. depósito",value:"deposito.numero"},{text:"Fecha depósito",value:"fecha_deposito"}],options:{search:"",convocatoria_id:"",institucion_id:"",sigla:"A",page:1,pageCount:0,itemsPerPage:10},postulantes:[],postulante:"",postulante_id:"",confirmDialog:!1,user:null}),created(){this.user=P["a"].getUser(),null==this.user&&this.$router.replace({name:"root"})},mounted(){const t=[9,10,11];this.user&&t.includes(this.user.rid)?(this.options.institucion_id=this.user.ies,this.getModalidades()):this.$router.replace({name:"root"})},methods:{...Object(S["b"])(["toast"]),getModalidades(){this.notify_load=!0,$.a.get(P["a"].getUrlAPI()+"admision/modalidad",P["a"].getHeader()).then(t=>{this.convocatoria=t.data.convocatoria?t.data.convocatoria:{id:null,cite:""},this.options.convocatoria_id=this.convocatoria.id,this.notify_title="Notificación",this.notify_load=!1,this.getPostulantes()}).catch(()=>{this.notify_load=!1,console.error("Parametros no encontrado")})},getPostulantes(){this.loading=!0,$.a.post(P["a"].getUrlAPI()+"admision/verificado/caja",this.options,P["a"].getHeader()).then(t=>{this.loading=!1,this.postulantes=t.data.rows,t.data.count>0&&(this.options.pageCount=Math.floor(t.data.count/this.options.itemsPerPage)+1)}).catch(t=>{this.loading=!1,console.error("Error al cargar registros",t)})},changeSearch(){this.options.search&&this.options.search.length>2&&this.getPostulantes()},changePerPage(){this.options.page=1,this.getPostulantes()},changePage(){this.getPostulantes()},reportVerificado(){this.load_report=!0,$.a.post(P["a"].getUrlAPI()+"admision/verificado/cajapdf",this.options,P["a"].getHeader()).then(t=>{const a=(new Date).toISOString(),e=t.data.esfm;let o=[{stack:[{marginTop:-20,fontSize:6,text:"Fecha actual\n"+y["a"].formatDate(a),alignment:"right"},{fontSize:14,bold:!0,color:"#212121",text:this.convocatoria.cite,alignment:"center"},{fontSize:12,bold:!0,color:"#424242",text:"POSTULANTES VERIFICADOS POR CAJA",alignment:"center"},{fontSize:11,bold:!0,color:"#424242",text:`MODALIDAD ${this.options.sigla} - ${this.convocatoria.gestion}`,alignment:"center"},{marginTop:8,fontSize:9,columns:[{width:"9%",bold:!0,text:"Departamento: ",style:"header"},{width:"16%",text:e?e.departamento.descripcion:""},{width:"6.5%",bold:!0,text:"ESFM/UA: "},{width:"68.5%",text:e?e.nombre:""}]}]}],i={marginTop:5,fontSize:8,layout:"lightHorizontalLines",table:{headerRows:1,widths:["3%","33%","13%","32%","10%","10%"],body:[[{text:"#",bold:!0,fillColor:"#dddddd"},{text:"Apellidos y Nombres",bold:!0,fillColor:"#dddddd"},{text:"Cédula identidad",bold:!0,fillColor:"#dddddd"},{text:"Especialidad",bold:!0,fillColor:"#dddddd"},{text:"Nro. depósito",bold:!0,fillColor:"#dddddd"},{text:"Fecha depósito",bold:!0,fillColor:"#dddddd"}]]}},s="";t.data.registro.forEach((t,a)=>{s=`${t.a_persona.paterno?t.a_persona.paterno:""} ${t.a_persona.materno?t.a_persona.materno:""} ${t.a_persona.nombres}`,i.table.body.push([a+1,s,t.a_persona.cedula_dni,t.especialidad.descripcion,t.deposito.numero,y["a"].formatDate(t.deposito.fecha)])}),o.push(i);var n={pageSize:"LETTER",pageOrientation:"landscape",pageMargins:[40,70,40,35],header:y["a"].setting().header,footer:y["a"].setting().footer,content:o};A.a.createPdf(n).download("Verificados-Mod"+this.options.sigla+".pdf"),this.load_report=!1}).catch(t=>{this.load_report=!1,console.error(t)})}}},N=I,O=e("2877"),z=Object(O["a"])(N,v,b,!1,null,null,null);a["default"]=z.exports}}]);
//# sourceMappingURL=chunk-431de208.2027dd28.js.map